.container

  %h1 Production of #{@play.title} by #{@production.company}
  %h2= markdown @impression.title 
  %br
  - if policy(@impression).update?
    = link_to 'Edit Impression', edit_impression_path(:id => @impression.id)
  - if policy(@impression).destroy?
    = link_to 'Delete Impression', {:id => @impression.id, :action => 'destroy'}, :method => :delete, data: {confirm: 'Do you want to delete this impression?'}
  %br
  %h3= @production.company

  %p= markdown @impression.body

  .row
    .col-md-7

      %h3 Comments

      - @comments.each do |com|
        = markdown com.body
        - if policy(com).destroy?
          = link_to 'Delete Comment', comment_path(com), :method => :delete, data: {confirm: 'Do you want to delete this comment?'}
        %br

    .col-md-5
      - if policy(Comment.new).create?
        = form_for Comment.new do |f|
          = f.label 'Add Comment'
          %br
          = f.text_area :body, placeholder: 'Comment', cols: 50, rows: 3
          %br
          = f.hidden_field :impression_id, :value => @impression.id
          %br
          = f.submit "Save and Parse"


